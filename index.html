<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>FRANVAL · Generador de Publicación</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Evitar caché vieja -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">FRANVAL</div>
      <div class="subtitle">Generador de Publicaciones</div>
    </div>
  </header>

  <main class="container">
    <section class="card form-card">
      <h2>Datos de la publicación</h2>
      <div class="grid">
        <label class="field">
          <span>Marca y modelo</span>
          <input id="modelo" type="text" placeholder="Chevrolet Silverado" />
        </label>

        <label class="field">
          <span>Año</span>
          <input id="anio" type="text" inputmode="numeric" placeholder="2020" />
        </label>

        <label class="field">
          <span>Cilindrada</span>
          <input id="cilindrada" type="text" placeholder="1.7" />
          <small>Se agrega “cc” automáticamente si falta</small>
        </label>

        <label class="field">
          <span>Versión</span>
          <input id="version" type="text" placeholder="LS / MAX / GLS" />
        </label>

        <label class="field">
          <span>Precio</span>
          <input id="precio" type="text" inputmode="numeric" placeholder="6000000 o 6.000.000" />
          <small>Se formatea a $6.000.000</small>
        </label>

        <label class="field">
          <span>Kilometraje</span>
          <input id="km" type="text" inputmode="numeric" placeholder="31000 o 31.000" />
          <small>Se formatea a 31.000 km</small>
        </label>

        <!-- Tabs + Paneles -->
        <div class="field field-wide">
          <span>Equipamiento (elige categoría y marca chips)</span>

          <div class="segmented" id="catTabs">
            <button type="button" class="seg-btn active" data-cat="BASICO">BÁSICO</button>
            <button type="button" class="seg-btn" data-cat="MEDIO">MEDIO</button>
            <button type="button" class="seg-btn" data-cat="FULL">FULL</button>
          </div>

          <div id="panelBasico" class="panel show">
            <div class="equip-title">BÁSICO</div>
            <div id="chipsBasico" class="chips"></div>
          </div>

          <div id="panelMedio" class="panel">
            <div class="equip-title">MEDIO</div>
            <div id="chipsMedio" class="chips"></div>
          </div>

          <div id="panelFull" class="panel">
            <div class="equip-title">FULL</div>
            <div id="chipsFull" class="chips"></div>
            <small class="warn">Si seleccionas <b>Full</b>, se desactivará todo lo demás y “Full” irá solo y al final.</small>
          </div>

          <small>Formato E1a: “KM , primer ítem” y luego pares. Con “Full”, el km va solo y “Full” queda en la última línea.</small>
        </div>
      </div>

      <div class="actions">
        <button id="btnGenerar" class="btn primary">Generar previsualización</button>
        <button id="btnDescargar" class="btn" disabled>Descargar PNG</button>
        <button id="btnLimpiar" class="btn ghost">Limpiar</button>
      </div>
      <div id="status" class="status"></div>
    </section>

    <section class="card preview-card">
      <h2>Previsualización</h2>
      <canvas id="lienzo" class="canvas"></canvas>
      <div class="hint">La plantilla se carga desde <code>/plantilla/plantilla_franval.png</code></div>
    </section>
  </main>

  <footer class="footer">
    <small>© FRANVAL · Generador de Publicaciones</small>
  </footer>

  <!-- cache-busting para evitar JS viejo -->
  <script src="script.js?v=2025-10-20-f1-final" defer></script>
</body>
</html>
